syntax = "v1"

info(
    title: "门店"
    desc: "门店"
    author: "MichaelHu"
    email: "matrix-x@artisan-cloud.com"
    version: "v1"
)


@server(
    group: admin/product
    prefix: /api/v1/admin/product
    middleware: EmployeeJWTAuth
)

service PowerX {
    @doc "查询门店列表"
    @handler ListStores
    get /stores (GetStoreListRequest) returns (GetStoreListReply)

    @doc "查询门店详情"
    @handler GetStore
    get /stores/:id (GetStoreRequest) returns (GetStoreReply)


    @doc "创建门店"
    @handler CreateStore
    post /stores (CreateStoreRequest) returns (CreateStoreReply)


    @doc "全量门店"
    @handler PutStore
    put /stores/:id (PutStoreRequest) returns (PutStoreReply)

    @doc "增量门店"
    @handler PatchStore
    patch /stores/:id (PatchStoreRequest) returns (PatchStoreReply)


    @doc "删除门店"
    @handler DeleteStore
    delete /stores/:id (DeleteStoreRequest) returns (DeleteStoreReply)

    @doc "分配门店品类给门店品类分类"
    @handler AssignStoreToStoreCategory
    post /stores/:id/actions/assign-to-store-categroy (AssignStoreManagerRequest) returns (AssignStoreManagerReply)
}

type (
    Store {
        Id int64 `json:"id,optional"`
        Name string `json:"name"`
        EmployeeId int64 `json:"employeeId"`
        ContactNumber string `json:"contactNumber"`
        CoverURL string `json:"coverURL"`
        Address string `json:"address"`
        Longitude float32 `json:"longitude"`
        Latitude float32 `json:"latitude"`
        CreatedAt string `json:"createdAt,optional"`
    }
)
type (
    GetStoreListRequest struct {
        StoreType string `form:"storeType,optional"`
        Keys []string `form:"keys,optional"`
        OrderBy string `form:"orderBy,optional"`
    }


    GetStoreListReply struct {
        List []Store `json:"list"`
    }
)

type (
    CreateStoreRequest struct {
        Store
    }

    CreateStoreReply struct {
        StoreId string `json:"storeId"`
    }
)

type (
    GetStoreRequest struct {
        StoreId string `path:"storeId"`
    }

    GetStoreReply struct {
        *Store
    }
)


type (
    PutStoreRequest struct {
        StoreId string `path:"storeId"`
        Store
    }

    PutStoreReply struct {
        *Store
    }
)

type (
    PatchStoreRequest struct {
        StoreId string `path:"storeId"`
        Store
    }

    PatchStoreReply struct {
        *Store
    }
)


type (
    DeleteStoreRequest struct {
        StoreId string `path:"storeId"`
    }

    DeleteStoreReply struct {
        StoreId string `json:"storeId"`
    }
)


type (
    AssignStoreManagerRequest {
        Id int64 `path:"id"`
        EmployeeId int64 `json:"employeeId"`
    }

    AssignStoreManagerReply {
        Store
    }
)
